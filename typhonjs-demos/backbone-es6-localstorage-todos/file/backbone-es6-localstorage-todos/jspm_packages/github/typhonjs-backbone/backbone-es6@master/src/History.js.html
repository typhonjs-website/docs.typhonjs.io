<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../../../../../../../">
  <title data-ice="title">(backbone-es6):<br>backbone/src/History.js | backbone-es6-localstorage-todos API Document</title>
  <link type="text/css" rel="stylesheet" href="css/mdl/material.min.css">
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/mdl/material.override.css">
  <link type="text/css" rel="stylesheet" href="css/navigation/nav-accordion-style.css">
  <link type="text/css" rel="stylesheet" href="css/navigation/esdoc-nav-style.css">
  <link type="text/css" rel="stylesheet" href="css/scrollbar/webkit-style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  
  
  <script src="script/manual.js"></script>
</head>
<body class="layout-container" data-ice="rootContainer">
<div id="contextpopup">
   <button id="context-menu" class="mdl-button mdl-js-button mdl-button--fab mdl-button--mini-fab mdl-js-ripple-effect hidden">
      <i class="material-icons">more_vert</i>
   </button>

   <ul class="mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-js-ripple-effect" for="context-menu">
      <li class="mdl-menu__item hidden" data-action="openLink">Open on ...</li>
      <li class="mdl-menu__item hidden" data-action="openLink">Open on ...</li>
      <li disabled class="mdl-menu__item hidden">Version: ...</li>
   </ul>
</div>


<header>
  <a href="./">Home</a>
  <a href="./manual/index.html" data-ice="manualHeaderLink">Manual</a>
  <a href="identifiers.html">Reference</a><a href="graphs/jspm_packages.html">Graphs</a>
  <a href="source.html">Source</a>
  
  <a data-ice="repoURL" href="https://github.com/typhonjs-demos/backbone-es6-localstorage-todos.git" class="repo-url-github">Repository</a>
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
</header>

<nav class="navigation" data-ice="nav"><ul class="nav-accordion-menu animated hidden" data-nav-id="docs-nav-id-1462781070300" data-ice="navData">
<li data-ice="navGroup" class="has-children"><input type="checkbox" name="group-0" id="group-0" checked><label for="group-0" class="nav-header">Local Source</label>
   <ul>
      
   <li data-ice="navFolder" class="has-children"><input type="checkbox" name="folder-0" id="folder-0" checked><label for="folder-0" class="nav-dir-path" data-scm-link="https://github.com/typhonjs-demos/backbone-es6-localstorage-todos/tree/master/site/js" data-scm-type="github">site/js</label>
         <ul>
            
         <li data-ice="navFile" class="has-children nav-accordion-file"><input type="checkbox" name="file-0" id="file-0" checked><label for="file-0" class="nav-file hidden" data-scm-link="https://github.com/typhonjs-demos/backbone-es6-localstorage-todos/tree/master/site/js/App.js" data-scm-type="github">App.js</label>
               <ul>
                  
               <li data-ice="doc" class="nav-kind-class"><span data-ice="docLink"><a href="class/backbone-es6-localstorage-todos/site/js/App.js~App.html" data-scm-link="https://github.com/typhonjs-demos/backbone-es6-localstorage-todos/tree/master/site/js/App.js#L19" data-scm-type="github">App</a></span></li>
</ul>
            </li>
</ul>
      </li>
<li data-ice="navFolder" class="has-children"><input type="checkbox" name="folder-1" id="folder-1" checked><label for="folder-1" class="nav-dir-path" data-scm-link="https://github.com/typhonjs-demos/backbone-es6-localstorage-todos/tree/master/site/js/collections" data-scm-type="github">site/js/collections</label>
         <ul>
            
         <li data-ice="navFile" class="has-children nav-accordion-file"><input type="checkbox" name="file-1" id="file-1" checked><label for="file-1" class="nav-file" data-scm-link="https://github.com/typhonjs-demos/backbone-es6-localstorage-todos/tree/master/site/js/collections/todoList.js" data-scm-type="github">todoList.js</label>
               <ul>
                  
               <li data-ice="doc" class="nav-kind-class"><span data-ice="docLink"><a href="class/backbone-es6-localstorage-todos/site/js/collections/todoList.js~TodoList.html" data-scm-link="https://github.com/typhonjs-demos/backbone-es6-localstorage-todos/tree/master/site/js/collections/todoList.js#L19" data-scm-type="github">TodoList</a></span></li>
<li data-ice="doc" class="nav-kind-variable"><span data-ice="docLink"><a href="variable/index.html#static-variable-todoList" data-scm-link="https://github.com/typhonjs-demos/backbone-es6-localstorage-todos/tree/master/site/js/collections/todoList.js#L82" data-scm-type="github">todoList</a></span></li>
</ul>
            </li>
</ul>
      </li>
<li data-ice="navFolder" class="has-children"><input type="checkbox" name="folder-2" id="folder-2" checked><label for="folder-2" class="nav-dir-path" data-scm-link="https://github.com/typhonjs-demos/backbone-es6-localstorage-todos/tree/master/site/js/models" data-scm-type="github">site/js/models</label>
         <ul>
            
         <li data-ice="navFile" class="has-children nav-accordion-file"><input type="checkbox" name="file-2" id="file-2" checked><label for="file-2" class="nav-file" data-scm-link="https://github.com/typhonjs-demos/backbone-es6-localstorage-todos/tree/master/site/js/models/appState.js" data-scm-type="github">appState.js</label>
               <ul>
                  
               <li data-ice="doc" class="nav-kind-class"><span data-ice="docLink"><a href="class/backbone-es6-localstorage-todos/site/js/models/appState.js~AppState.html" data-scm-link="https://github.com/typhonjs-demos/backbone-es6-localstorage-todos/tree/master/site/js/models/appState.js#L10" data-scm-type="github">AppState</a></span></li>
<li data-ice="doc" class="nav-kind-variable"><span data-ice="docLink"><a href="variable/index.html#static-variable-appState" data-scm-link="https://github.com/typhonjs-demos/backbone-es6-localstorage-todos/tree/master/site/js/models/appState.js#L31" data-scm-type="github">appState</a></span></li>
</ul>
            </li>
<li data-ice="navFile" class="has-children nav-accordion-file"><input type="checkbox" name="file-3" id="file-3" checked><label for="file-3" class="nav-file" data-scm-link="https://github.com/typhonjs-demos/backbone-es6-localstorage-todos/tree/master/site/js/models/Item.js" data-scm-type="github">Item.js</label>
               <ul>
                  
               <li data-ice="doc" class="nav-kind-class"><span data-ice="docLink"><a href="class/backbone-es6-localstorage-todos/site/js/models/Item.js~Item.html" data-scm-link="https://github.com/typhonjs-demos/backbone-es6-localstorage-todos/tree/master/site/js/models/Item.js#L9" data-scm-type="github">Item</a></span></li>
</ul>
            </li>
</ul>
      </li>
<li data-ice="navFolder" class="has-children"><input type="checkbox" name="folder-3" id="folder-3" checked><label for="folder-3" class="nav-dir-path" data-scm-link="https://github.com/typhonjs-demos/backbone-es6-localstorage-todos/tree/master/site/js/router" data-scm-type="github">site/js/router</label>
         <ul>
            
         <li data-ice="navFile" class="has-children nav-accordion-file"><input type="checkbox" name="file-4" id="file-4" checked><label for="file-4" class="nav-file hidden" data-scm-link="https://github.com/typhonjs-demos/backbone-es6-localstorage-todos/tree/master/site/js/router/AppRouter.js" data-scm-type="github">AppRouter.js</label>
               <ul>
                  
               <li data-ice="doc" class="nav-kind-class"><span data-ice="docLink"><a href="class/backbone-es6-localstorage-todos/site/js/router/AppRouter.js~AppRouter.html" data-scm-link="https://github.com/typhonjs-demos/backbone-es6-localstorage-todos/tree/master/site/js/router/AppRouter.js#L16" data-scm-type="github">AppRouter</a></span></li>
</ul>
            </li>
</ul>
      </li>
<li data-ice="navFolder" class="has-children"><input type="checkbox" name="folder-4" id="folder-4" checked><label for="folder-4" class="nav-dir-path" data-scm-link="https://github.com/typhonjs-demos/backbone-es6-localstorage-todos/tree/master/site/js/views" data-scm-type="github">site/js/views</label>
         <ul>
            
         <li data-ice="navFile" class="has-children nav-accordion-file"><input type="checkbox" name="file-5" id="file-5" checked><label for="file-5" class="nav-file hidden" data-scm-link="https://github.com/typhonjs-demos/backbone-es6-localstorage-todos/tree/master/site/js/views/ItemView.js" data-scm-type="github">ItemView.js</label>
               <ul>
                  
               <li data-ice="doc" class="nav-kind-class"><span data-ice="docLink"><a href="class/backbone-es6-localstorage-todos/site/js/views/ItemView.js~ItemView.html" data-scm-link="https://github.com/typhonjs-demos/backbone-es6-localstorage-todos/tree/master/site/js/views/ItemView.js#L14" data-scm-type="github">ItemView</a></span></li>
</ul>
            </li>
<li data-ice="navFile" class="has-children nav-accordion-file"><input type="checkbox" name="file-6" id="file-6" checked><label for="file-6" class="nav-file hidden" data-scm-link="https://github.com/typhonjs-demos/backbone-es6-localstorage-todos/tree/master/site/js/views/ManageTodosView.js" data-scm-type="github">ManageTodosView.js</label>
               <ul>
                  
               <li data-ice="doc" class="nav-kind-class"><span data-ice="docLink"><a href="class/backbone-es6-localstorage-todos/site/js/views/ManageTodosView.js~ManageTodosView.html" data-scm-link="https://github.com/typhonjs-demos/backbone-es6-localstorage-todos/tree/master/site/js/views/ManageTodosView.js#L20" data-scm-type="github">ManageTodosView</a></span></li>
</ul>
            </li>
</ul>
      </li>
</ul>
</li>

<li data-ice="navGroup" class="has-children"><input type="checkbox" name="group-1" id="group-1"><label for="group-1" class="nav-header">JSPM Managed Source</label>
   <ul>
      
   <li data-ice="navPackage" class="has-children"><input type="checkbox" name="package-0" id="package-0"><label for="package-0" class="nav-package nav-is-alias" data-package-version="master" data-scm-link="https://github.com/typhonjs-backbone/backbone-es6" data-scm-type="github">backbone (backbone-es6)</label>
         <ul>
            
         <li data-ice="navFolder" class="has-children"><input type="checkbox" name="folder-5" id="folder-5" checked><label for="folder-5" class="nav-dir-path" data-scm-link="https://github.com/typhonjs-backbone/backbone-es6/tree/master/src" data-scm-type="github">src</label>
               <ul>
                  
               <li data-ice="navFile" class="has-children nav-accordion-file"><input type="checkbox" name="file-7" id="file-7" checked><label for="file-7" class="nav-file hidden" data-scm-link="https://github.com/typhonjs-backbone/backbone-es6/tree/master/src/Backbone.js" data-scm-type="github">Backbone.js</label>
                     <ul>
                        
                     <li data-ice="doc" class="nav-kind-class"><span data-ice="docLink"><a href="class/backbone-es6-localstorage-todos/jspm_packages/github/typhonjs-backbone/backbone-es6@master/src/Backbone.js~Backbone.html" data-scm-link="https://github.com/typhonjs-backbone/backbone-es6/tree/master/src/Backbone.js#L33" data-scm-type="github">Backbone</a></span></li>
</ul>
                  </li>
<li data-ice="navFile" class="has-children nav-accordion-file"><input type="checkbox" name="file-8" id="file-8" checked><label for="file-8" class="nav-file hidden" data-scm-link="https://github.com/typhonjs-backbone/backbone-es6/tree/master/src/Collection.js" data-scm-type="github">Collection.js</label>
                     <ul>
                        
                     <li data-ice="doc" class="nav-kind-class"><span data-ice="docLink"><a href="class/backbone-es6-localstorage-todos/jspm_packages/github/typhonjs-backbone/backbone-es6@master/src/Collection.js~Collection.html" data-scm-link="https://github.com/typhonjs-backbone/backbone-es6/tree/master/src/Collection.js#L232" data-scm-type="github">Collection</a></span></li>
</ul>
                  </li>
<li data-ice="navFile" class="has-children nav-accordion-file"><input type="checkbox" name="file-9" id="file-9" checked><label for="file-9" class="nav-file hidden" data-scm-link="https://github.com/typhonjs-backbone/backbone-es6/tree/master/src/Debug.js" data-scm-type="github">Debug.js</label>
                     <ul>
                        
                     <li data-ice="doc" class="nav-kind-class"><span data-ice="docLink"><a href="class/backbone-es6-localstorage-todos/jspm_packages/github/typhonjs-backbone/backbone-es6@master/src/Debug.js~Debug.html" data-scm-link="https://github.com/typhonjs-backbone/backbone-es6/tree/master/src/Debug.js#L13" data-scm-type="github">Debug</a></span></li>
</ul>
                  </li>
<li data-ice="navFile" class="has-children nav-accordion-file"><input type="checkbox" name="file-10" id="file-10" checked><label for="file-10" class="nav-file hidden" data-scm-link="https://github.com/typhonjs-backbone/backbone-es6/tree/master/src/History.js" data-scm-type="github">History.js</label>
                     <ul>
                        
                     <li data-ice="doc" class="nav-kind-class"><span data-ice="docLink"><a href="class/backbone-es6-localstorage-todos/jspm_packages/github/typhonjs-backbone/backbone-es6@master/src/History.js~History.html" data-scm-link="https://github.com/typhonjs-backbone/backbone-es6/tree/master/src/History.js#L66" data-scm-type="github">History</a></span></li>
</ul>
                  </li>
<li data-ice="navFile" class="has-children nav-accordion-file"><input type="checkbox" name="file-11" id="file-11" checked><label for="file-11" class="nav-file hidden" data-scm-link="https://github.com/typhonjs-backbone/backbone-es6/tree/master/src/Model.js" data-scm-type="github">Model.js</label>
                     <ul>
                        
                     <li data-ice="doc" class="nav-kind-class"><span data-ice="docLink"><a href="class/backbone-es6-localstorage-todos/jspm_packages/github/typhonjs-backbone/backbone-es6@master/src/Model.js~Model.html" data-scm-link="https://github.com/typhonjs-backbone/backbone-es6/tree/master/src/Model.js#L153" data-scm-type="github">Model</a></span></li>
</ul>
                  </li>
<li data-ice="navFile" class="has-children nav-accordion-file"><input type="checkbox" name="file-12" id="file-12" checked><label for="file-12" class="nav-file hidden" data-scm-link="https://github.com/typhonjs-backbone/backbone-es6/tree/master/src/Router.js" data-scm-type="github">Router.js</label>
                     <ul>
                        
                     <li data-ice="doc" class="nav-kind-class"><span data-ice="docLink"><a href="class/backbone-es6-localstorage-todos/jspm_packages/github/typhonjs-backbone/backbone-es6@master/src/Router.js~Router.html" data-scm-link="https://github.com/typhonjs-backbone/backbone-es6/tree/master/src/Router.js#L167" data-scm-type="github">Router</a></span></li>
</ul>
                  </li>
<li data-ice="navFile" class="has-children nav-accordion-file"><input type="checkbox" name="file-13" id="file-13" checked><label for="file-13" class="nav-file hidden" data-scm-link="https://github.com/typhonjs-backbone/backbone-es6/tree/master/src/Utils.js" data-scm-type="github">Utils.js</label>
                     <ul>
                        
                     <li data-ice="doc" class="nav-kind-class"><span data-ice="docLink"><a href="class/backbone-es6-localstorage-todos/jspm_packages/github/typhonjs-backbone/backbone-es6@master/src/Utils.js~Utils.html" data-scm-link="https://github.com/typhonjs-backbone/backbone-es6/tree/master/src/Utils.js#L98" data-scm-type="github">Utils</a></span></li>
</ul>
                  </li>
<li data-ice="navFile" class="has-children nav-accordion-file"><input type="checkbox" name="file-14" id="file-14" checked><label for="file-14" class="nav-file hidden" data-scm-link="https://github.com/typhonjs-backbone/backbone-es6/tree/master/src/View.js" data-scm-type="github">View.js</label>
                     <ul>
                        
                     <li data-ice="doc" class="nav-kind-class"><span data-ice="docLink"><a href="class/backbone-es6-localstorage-todos/jspm_packages/github/typhonjs-backbone/backbone-es6@master/src/View.js~View.html" data-scm-link="https://github.com/typhonjs-backbone/backbone-es6/tree/master/src/View.js#L70" data-scm-type="github">View</a></span></li>
</ul>
                  </li>
<li data-ice="navFile" class="has-children nav-accordion-file"><input type="checkbox" name="file-15" id="file-15" checked><label for="file-15" class="nav-file hidden" data-scm-link="https://github.com/typhonjs-backbone/backbone-es6/tree/master/src/extend.js" data-scm-type="github">extend.js</label>
                     <ul>
                        
                     <li data-ice="doc" class="nav-kind-function"><span data-ice="docLink"><a href="function/index.html#static-function-extend" data-scm-link="https://github.com/typhonjs-backbone/backbone-es6/tree/master/src/extend.js#L21" data-scm-type="github">extend</a></span></li>
</ul>
                  </li>
<li data-ice="navFile" class="has-children nav-accordion-file"><input type="checkbox" name="file-16" id="file-16" checked><label for="file-16" class="nav-file hidden" data-scm-link="https://github.com/typhonjs-backbone/backbone-es6/tree/master/src/sync.js" data-scm-type="github">sync.js</label>
                     <ul>
                        
                     <li data-ice="doc" class="nav-kind-function"><span data-ice="docLink"><a href="function/index.html#static-function-sync" data-scm-link="https://github.com/typhonjs-backbone/backbone-es6/tree/master/src/sync.js#L42" data-scm-type="github">sync</a></span></li>
</ul>
                  </li>
<li data-ice="navFile" class="has-children nav-accordion-file"><input type="checkbox" name="file-17" id="file-17" checked><label for="file-17" class="nav-file hidden" data-scm-link="https://github.com/typhonjs-backbone/backbone-es6/tree/master/src/BackboneProxy.js" data-scm-type="github">BackboneProxy.js</label>
                     <ul>
                        
                     <li data-ice="doc" class="nav-kind-variable"><span data-ice="docLink"><a href="variable/index.html#static-variable-BackboneProxy" data-scm-link="https://github.com/typhonjs-backbone/backbone-es6/tree/master/src/BackboneProxy.js#L19" data-scm-type="github">BackboneProxy</a></span></li>
</ul>
                  </li>
</ul>
            </li>
</ul>
      </li>
<li data-ice="navPackage" class="has-children"><input type="checkbox" name="package-1" id="package-1"><label for="package-1" class="nav-package" data-package-version="master" data-scm-link="https://github.com/typhonjs-backbone/typhonjs-core-backbone-events" data-scm-type="github">typhonjs-core-backbone-events</label>
         <ul>
            
         <li data-ice="navFolder" class="has-children"><input type="checkbox" name="folder-6" id="folder-6" checked><label for="folder-6" class="nav-dir-path" data-scm-link="https://github.com/typhonjs-backbone/typhonjs-core-backbone-events/tree/master/src" data-scm-type="github">src</label>
               <ul>
                  
               <li data-ice="navFile" class="has-children nav-accordion-file"><input type="checkbox" name="file-18" id="file-18" checked><label for="file-18" class="nav-file hidden" data-scm-link="https://github.com/typhonjs-backbone/typhonjs-core-backbone-events/tree/master/src/Events.js" data-scm-type="github">Events.js</label>
                     <ul>
                        
                     <li data-ice="doc" class="nav-kind-class"><span data-ice="docLink"><a href="class/backbone-es6-localstorage-todos/jspm_packages/github/typhonjs-backbone/typhonjs-core-backbone-events@master/src/Events.js~Events.html" data-scm-link="https://github.com/typhonjs-backbone/typhonjs-core-backbone-events/tree/master/src/Events.js#L315" data-scm-type="github">Events</a></span></li>
</ul>
                  </li>
<li data-ice="navFile" class="has-children nav-accordion-file"><input type="checkbox" name="file-19" id="file-19" checked><label for="file-19" class="nav-file hidden" data-scm-link="https://github.com/typhonjs-backbone/typhonjs-core-backbone-events/tree/master/src/TyphonEvents.js" data-scm-type="github">TyphonEvents.js</label>
                     <ul>
                        
                     <li data-ice="doc" class="nav-kind-class"><span data-ice="docLink"><a href="class/backbone-es6-localstorage-todos/jspm_packages/github/typhonjs-backbone/typhonjs-core-backbone-events@master/src/TyphonEvents.js~TyphonEvents.html" data-scm-link="https://github.com/typhonjs-backbone/typhonjs-core-backbone-events/tree/master/src/TyphonEvents.js#L20" data-scm-type="github">TyphonEvents</a></span></li>
</ul>
                  </li>
</ul>
            </li>
</ul>
      </li>
<li data-ice="navPackage" class="has-children"><input type="checkbox" name="package-2" id="package-2"><label for="package-2" class="nav-package" data-package-version="master" data-scm-link="https://github.com/typhonjs-backbone/typhonjs-core-backbone-events-logged" data-scm-type="github">typhonjs-core-backbone-events-logged</label>
         <ul>
            
         <li data-ice="navFolder" class="has-children"><input type="checkbox" name="folder-7" id="folder-7" checked><label for="folder-7" class="nav-dir-path" data-scm-link="https://github.com/typhonjs-backbone/typhonjs-core-backbone-events-logged/tree/master/src" data-scm-type="github">src</label>
               <ul>
                  
               <li data-ice="navFile" class="has-children nav-accordion-file"><input type="checkbox" name="file-20" id="file-20" checked><label for="file-20" class="nav-file hidden" data-scm-link="https://github.com/typhonjs-backbone/typhonjs-core-backbone-events-logged/tree/master/src/TyphonLoggedEvents.js" data-scm-type="github">TyphonLoggedEvents.js</label>
                     <ul>
                        
                     <li data-ice="doc" class="nav-kind-class"><span data-ice="docLink"><a href="class/backbone-es6-localstorage-todos/jspm_packages/github/typhonjs-backbone/typhonjs-core-backbone-events-logged@master/src/TyphonLoggedEvents.js~TyphonLoggedEvents.html" data-scm-link="https://github.com/typhonjs-backbone/typhonjs-core-backbone-events-logged/tree/master/src/TyphonLoggedEvents.js#L27" data-scm-type="github">TyphonLoggedEvents</a></span></li>
</ul>
                  </li>
</ul>
            </li>
</ul>
      </li>
<li data-ice="navPackage" class="has-children"><input type="checkbox" name="package-3" id="package-3"><label for="package-3" class="nav-package" data-package-version="master" data-scm-link="https://github.com/typhonjs-backbone/typhonjs-core-backbone-localstorage" data-scm-type="github">typhonjs-core-backbone-localstorage</label>
         <ul>
            
         <li data-ice="navFolder" class="has-children"><input type="checkbox" name="folder-8" id="folder-8" checked><label for="folder-8" class="nav-dir-path" data-scm-link="https://github.com/typhonjs-backbone/typhonjs-core-backbone-localstorage/tree/master/src" data-scm-type="github">src</label>
               <ul>
                  
               <li data-ice="navFile" class="has-children nav-accordion-file"><input type="checkbox" name="file-21" id="file-21" checked><label for="file-21" class="nav-file hidden" data-scm-link="https://github.com/typhonjs-backbone/typhonjs-core-backbone-localstorage/tree/master/src/LocalStorage.js" data-scm-type="github">LocalStorage.js</label>
                     <ul>
                        
                     <li data-ice="doc" class="nav-kind-class"><span data-ice="docLink"><a href="class/backbone-es6-localstorage-todos/jspm_packages/github/typhonjs-backbone/typhonjs-core-backbone-localstorage@master/src/LocalStorage.js~LocalStorage.html" data-scm-link="https://github.com/typhonjs-backbone/typhonjs-core-backbone-localstorage/tree/master/src/LocalStorage.js#L116" data-scm-type="github">LocalStorage</a></span></li>
</ul>
                  </li>
<li data-ice="navFile" class="has-children nav-accordion-file"><input type="checkbox" name="file-22" id="file-22" checked><label for="file-22" class="nav-file hidden" data-scm-link="https://github.com/typhonjs-backbone/typhonjs-core-backbone-localstorage/tree/master/src/localSync.js" data-scm-type="github">localSync.js</label>
                     <ul>
                        
                     <li data-ice="doc" class="nav-kind-function"><span data-ice="docLink"><a href="function/index.html#static-function-localSync" data-scm-link="https://github.com/typhonjs-backbone/typhonjs-core-backbone-localstorage/tree/master/src/localSync.js#L13" data-scm-type="github">localSync</a></span></li>
</ul>
                  </li>
</ul>
            </li>
</ul>
      </li>
<li data-ice="navPackage" class="has-children"><input type="checkbox" name="package-4" id="package-4"><label for="package-4" class="nav-package" data-package-version="master" data-scm-link="https://github.com/typhonjs-common/typhonjs-core-logging" data-scm-type="github">typhonjs-core-logging</label>
         <ul>
            
         <li data-ice="navFolder" class="has-children"><input type="checkbox" name="folder-9" id="folder-9" checked><label for="folder-9" class="nav-dir-path" data-scm-link="https://github.com/typhonjs-common/typhonjs-core-logging/tree/master/src" data-scm-type="github">src</label>
               <ul>
                  
               <li data-ice="navFile" class="has-children nav-accordion-file"><input type="checkbox" name="file-23" id="file-23" checked><label for="file-23" class="nav-file hidden" data-scm-link="https://github.com/typhonjs-common/typhonjs-core-logging/tree/master/src/ConsoleLogger.js" data-scm-type="github">ConsoleLogger.js</label>
                     <ul>
                        
                     <li data-ice="doc" class="nav-kind-class"><span data-ice="docLink"><a href="class/backbone-es6-localstorage-todos/jspm_packages/github/typhonjs-common/typhonjs-core-logging@master/src/ConsoleLogger.js~ConsoleLogger.html" data-scm-link="https://github.com/typhonjs-common/typhonjs-core-logging/tree/master/src/ConsoleLogger.js#L9" data-scm-type="github">ConsoleLogger</a></span></li>
</ul>
                  </li>
<li data-ice="navFile" class="has-children nav-accordion-file"><input type="checkbox" name="file-24" id="file-24" checked><label for="file-24" class="nav-file hidden" data-scm-link="https://github.com/typhonjs-common/typhonjs-core-logging/tree/master/src/Logger.js" data-scm-type="github">Logger.js</label>
                     <ul>
                        
                     <li data-ice="doc" class="nav-kind-class"><span data-ice="docLink"><a href="class/backbone-es6-localstorage-todos/jspm_packages/github/typhonjs-common/typhonjs-core-logging@master/src/Logger.js~Logger.html" data-scm-link="https://github.com/typhonjs-common/typhonjs-core-logging/tree/master/src/Logger.js#L31" data-scm-type="github">Logger</a></span></li>
</ul>
                  </li>
</ul>
            </li>
</ul>
      </li>
<li data-ice="navPackage" class="has-children"><input type="checkbox" name="package-5" id="package-5"><label for="package-5" class="nav-package" data-package-version="master" data-scm-link="https://github.com/typhonjs-common/typhonjs-core-utils" data-scm-type="github">typhonjs-core-utils</label>
         <ul>
            
         <li data-ice="navFolder" class="has-children"><input type="checkbox" name="folder-10" id="folder-10" checked><label for="folder-10" class="nav-dir-path" data-scm-link="https://github.com/typhonjs-common/typhonjs-core-utils/tree/master/src" data-scm-type="github">src</label>
               <ul>
                  
               <li data-ice="navFile" class="has-children nav-accordion-file"><input type="checkbox" name="file-25" id="file-25" checked><label for="file-25" class="nav-file hidden" data-scm-link="https://github.com/typhonjs-common/typhonjs-core-utils/tree/master/src/Utils.js" data-scm-type="github">Utils.js</label>
                     <ul>
                        
                     <li data-ice="doc" class="nav-kind-class"><span data-ice="docLink"><a href="class/backbone-es6-localstorage-todos/jspm_packages/github/typhonjs-common/typhonjs-core-utils@master/src/Utils.js~Utils.html" data-scm-link="https://github.com/typhonjs-common/typhonjs-core-utils/tree/master/src/Utils.js#L6" data-scm-type="github">Utils</a></span></li>
</ul>
                  </li>
<li data-ice="navFile" class="has-children nav-accordion-file"><input type="checkbox" name="file-26" id="file-26" checked><label for="file-26" class="nav-file hidden" data-scm-link="https://github.com/typhonjs-common/typhonjs-core-utils/tree/master/src/btoa.js" data-scm-type="github">btoa.js</label>
                     <ul>
                        
                     <li data-ice="doc" class="nav-kind-variable"><span data-ice="docLink"><a href="variable/index.html#static-variable-btoa" data-scm-link="https://github.com/typhonjs-common/typhonjs-core-utils/tree/master/src/btoa.js#L94" data-scm-type="github">btoa</a></span></li>
</ul>
                  </li>
</ul>
            </li>
</ul>
      </li>
</ul>
</li>
</ul></nav>

<div class="content" data-ice="content"><h1 data-ice="title">(backbone-es6):<br>backbone/src/History.js</h1>
<pre class="source-code line-number raw-source-code"><code class="prettyprint linenums" data-ice="content">&apos;use strict&apos;;

import _       from &apos;underscore&apos;;
import Events  from &apos;typhonjs-core-backbone-events/src/Events.js&apos;;
import Utils   from &apos;./Utils.js&apos;;

// Private / internal methods ---------------------------------------------------------------------------------------

/**
 * Cached regex for stripping a leading hash/slash and trailing space.
 */
const s_ROUTE_STRIPPER = /^[#\/]|\s+$/g;

/**
 * Cached regex for stripping leading and trailing slashes.
 */
const s_ROOT_STRIPPER = /^\/+|\/+$/g;

/**
 * Cached regex for stripping urls of hash.
 */
const s_PATH_STRIPPER = /#.*$/;

/**
 * Update the hash location, either replacing the current entry, or adding a new one to the browser history.
 *
 * @param {object}   location - URL / current location
 * @param {string}   fragment - URL fragment
 * @param {boolean}  replace  - conditional replace
 */
const s_UPDATE_HASH = (location, fragment, replace) =&gt;
{
   if (replace)
   {
      const href = location.href.replace(/(javascript:|#).*$/, &apos;&apos;);
      location.replace(`${href}#${fragment}`);
   }
   else
   {
      // Some browsers require that `hash` contains a leading #.
      location.hash = `#${fragment}`;
   }
};

/**
 * Backbone.History - History serves as a global router. (http://backbonejs.org/#History)
 * ----------------
 *
 * History serves as a global router (per frame) to handle hashchange events or pushState, match the appropriate route,
 * and trigger callbacks. You shouldn&apos;t ever have to create one of these yourself since Backbone.history already
 * contains one.
 *
 * pushState support exists on a purely opt-in basis in Backbone. Older browsers that don&apos;t support pushState will
 * continue to use hash-based URL fragments, and if a hash URL is visited by a pushState-capable browser, it will be
 * transparently upgraded to the true URL. Note that using real URLs requires your web server to be able to correctly
 * render those pages, so back-end changes are required as well. For example, if you have a route of /documents/100,
 * your web server must be able to serve that page, if the browser visits that URL directly. For full search-engine
 * crawlability, it&apos;s best to have the server generate the complete HTML for the page ... but if it&apos;s a web application,
 * just rendering the same content you would have for the root URL, and filling in the rest with Backbone Views and
 * JavaScript works fine.
 *
 * Handles cross-browser history management, based on either [pushState](http://diveintohtml5.info/history.html) and
 * real URLs, or [onhashchange](https://developer.mozilla.org/en-US/docs/DOM/window.onhashchange) and URL fragments.
 * If the browser supports neither (old IE, natch), falls back to polling.
 */
export default class History extends Events
{
   /** */
   constructor()
   {
      super();

      /**
       * Stores route / callback pairs for validation.
       * @type {Array&lt;Object&lt;string, function&gt;&gt;}
       */
      this.handlers = [];
      this.checkUrl = _.bind(this.checkUrl, this);

      // Ensure that `History` can be used outside of the browser.
      if (typeof window !== &apos;undefined&apos;)
      {
         /**
          * Browser Location or URL string.
          * @type {Location|String}
          */
         this.location = window.location;

         /**
          * Browser history
          * @type {History}
          */
         this.history = window.history;
      }

      /**
       * Has the history handling already been started?
       * @type {boolean}
       */
      this.started = false;

      /**
       * The default interval to poll for hash changes, if necessary, is twenty times a second.
       * @type {number}
       */
      this.interval = 50;
   }

   /**
    * Are we at the app root?
    *
    * @returns {boolean}
    */
   atRoot()
   {
      const path = this.location.pathname.replace(/[^\/]$/, &apos;$&amp;/&apos;);
      return path === this.root &amp;&amp; !this.getSearch();
   }

   /**
    * Checks the current URL to see if it has changed, and if it has, calls `loadUrl`, normalizing across the
    * hidden iframe.
    *
    * @returns {boolean}
    */
   checkUrl()
   {
      let current = this.getFragment();

      // If the user pressed the back button, the iframe&apos;s hash will have changed and we should use that for comparison.
      if (current === this.fragment &amp;&amp; this.iframe)
      {
         current = this.getHash(this.iframe.contentWindow);
      }

      if (current === this.fragment) { return false; }
      if (this.iframe) { this.navigate(current); }
      this.loadUrl();
   }

   /**
    * Unicode characters in `location.pathname` are percent encoded so they&apos;re decoded for comparison. `%25` should
    * not be decoded since it may be part of an encoded parameter.
    *
    * @param {string}   fragment - URL fragment
    * @return {string}
    */
   decodeFragment(fragment)
   {
      return decodeURI(fragment.replace(/%25/g, &apos;%2525&apos;));
   }

   /**
    * Get the cross-browser normalized URL fragment from the path or hash.
    *
    * @param {string} fragment   -- URL fragment
    * @returns {*|void|string|XML}
    */
   getFragment(fragment)
   {
      if (Utils.isNullOrUndef(fragment))
      {
         if (this._usePushState || !this._wantsHashChange)
         {
            fragment = this.getPath();
         }
         else
         {
            fragment = this.getHash();
         }
      }
      return fragment.replace(s_ROUTE_STRIPPER, &apos;&apos;);
   }

   /**
    * Gets the true hash value. Cannot use location.hash directly due to bug in Firefox where location.hash will
    * always be decoded.
    *
    * @param {object}   window   - Browser `window`
    * @returns {*}
    */
   getHash(window)
   {
      const match = (window || this).location.href.match(/#(.*)$/);
      return match ? match[1] : &apos;&apos;;
   }

   /**
    * Get the pathname and search params, without the root.
    *
    * @returns {*}
    */
   getPath()
   {
      const path = this.decodeFragment(this.location.pathname + this.getSearch()).slice(this.root.length - 1);
      return path.charAt(0) === &apos;/&apos; ? path.slice(1) : path;
   }

   /**
    * In IE6, the hash fragment and search params are incorrect if the fragment contains `?`.
    *
    * @returns {string}
    */
   getSearch()
   {
      const match = this.location.href.replace(/#.*/, &apos;&apos;).match(/\?.+/);
      return match ? match[0] : &apos;&apos;;
   }

   /**
    * Attempt to load the current URL fragment. If a route succeeds with a match, returns `true`. If no defined routes
    * matches the fragment, returns `false`.
    *
    * @param {string}   fragment - URL fragment
    * @returns {boolean}
    */
   loadUrl(fragment)
   {
      // If the root doesn&apos;t match, no routes can match either.
      if (!this.matchRoot()) { return false; }
      fragment = this.fragment = this.getFragment(fragment);
      return _.some(this.handlers, (handler) =&gt;
      {
         if (handler.route.test(fragment))
         {
            handler.callback(fragment);
            return true;
         }
      });
   }

   /**
    * Does the pathname match the root?
    *
    * @returns {boolean}
    */
   matchRoot()
   {
      const path = this.decodeFragment(this.location.pathname);
      const root = `${path.slice(0, this.root.length - 1)}/`;
      return root === this.root;
   }

   /**
    * Save a fragment into the hash history, or replace the URL state if the &apos;replace&apos; option is passed. You are
    * responsible for properly URL-encoding the fragment in advance.
    *
    * The options object can contain `trigger: true` if you wish to have the route callback be fired (not usually
    * desirable), or `replace: true`, if you wish to modify the current URL without adding an entry to the history.
    *
    * @param {string}   fragment - String representing an URL fragment.
    * @param {object}   options - Optional hash containing parameters for navigate.
    * @returns {*}
    */
   navigate(fragment, options)
   {
      if (!History.started) { return false; }
      if (!options || options === true) { options = { trigger: !!options }; }

      // Normalize the fragment.
      fragment = this.getFragment(fragment || &apos;&apos;);

      // Don&apos;t include a trailing slash on the root.
      let root = this.root;

      if (fragment === &apos;&apos; || fragment.charAt(0) === &apos;?&apos;)
      {
         root = root.slice(0, -1) || &apos;/&apos;;
      }

      const url = root + fragment;

      // Strip the hash and decode for matching.
      fragment = this.decodeFragment(fragment.replace(s_PATH_STRIPPER, &apos;&apos;));

      if (this.fragment === fragment) { return; }

      /**
       * URL fragment
       * @type {*|void|string|XML}
       */
      this.fragment = fragment;

      // If pushState is available, we use it to set the fragment as a real URL.
      if (this._usePushState)
      {
         this.history[options.replace ? &apos;replaceState&apos; : &apos;pushState&apos;]({}, document.title, url);

         // If hash changes haven&apos;t been explicitly disabled, update the hash fragment to store history.
      }
      else if (this._wantsHashChange)
      {
         s_UPDATE_HASH(this.location, fragment, options.replace);

         if (this.iframe &amp;&amp; (fragment !== this.getHash(this.iframe.contentWindow)))
         {
            const iWindow = this.iframe.contentWindow;

            // Opening and closing the iframe tricks IE7 and earlier to push a history
            // entry on hash-tag change.  When replace is true, we don&apos;t want this.
            if (!options.replace)
            {
               iWindow.document.open();
               iWindow.document.close();
            }

            s_UPDATE_HASH(iWindow.location, fragment, options.replace);
         }

         // If you&apos;ve told us that you explicitly don&apos;t want fallback hashchange-
         // based history, then `navigate` becomes a page refresh.
      }
      else
      {
         return this.location.assign(url);
      }

      if (options.trigger) { return this.loadUrl(fragment); }
   }

   /**
    * When all of your Routers have been created, and all of the routes are set up properly, call
    * Backbone.history.start() to begin monitoring hashchange events, and dispatching routes. Subsequent calls to
    * Backbone.history.start() will throw an error, and Backbone.History.started is a boolean value indicating whether
    * it has already been called.
    *
    * To indicate that you&apos;d like to use HTML5 pushState support in your application, use
    * Backbone.history.start({pushState: true}). If you&apos;d like to use pushState, but have browsers that don&apos;t support
    * it natively use full page refreshes instead, you can add {hashChange: false} to the options.
    *
    * If your application is not being served from the root url / of your domain, be sure to tell History where the
    * root really is, as an option: Backbone.history.start({pushState: true, root: &quot;/public/search/&quot;})
    *
    * When called, if a route succeeds with a match for the current URL, Backbone.history.start() returns true. If no
    * defined route matches the current URL, it returns false.
    *
    * If the server has already rendered the entire page, and you don&apos;t want the initial route to trigger when starting
    * History, pass silent: true.
    *
    * Because hash-based history in Internet Explorer relies on an &lt;iframe&gt;, be sure to call start() only after the DOM
    * is ready.
    *
    * @example
    * import WorkspaceRouter from &apos;WorkspaceRouter.js&apos;;
    * import HelpPaneRouter  from &apos;HelpPaneRouter.js&apos;;
    *
    * new WorkspaceRouter();
    * new HelpPaneRouter();
    * Backbone.history.start({pushState: true});
    *
    * @param {object}   options  - Optional parameters
    * @returns {*}
    */
   start(options)
   {
      if (History.started) { throw new Error(&apos;Backbone.history has already been started&apos;); }

      History.started = true;

      /**
       * Figure out the initial configuration. Do we need an iframe?
       * @type {Object}
       */
      this.options = _.extend({ root: &apos;/&apos; }, this.options, options);

      /**
       * URL root
       * @type {string}
       */
      this.root = this.options.root;

      this._wantsHashChange = this.options.hashChange !== false;
      this._hasHashChange = &apos;onhashchange&apos; in window &amp;&amp; (document.documentMode === void 0 || document.documentMode &gt; 7);
      this._useHashChange = this._wantsHashChange &amp;&amp; this._hasHashChange;

      // Is pushState desired ... is it available?
      this._wantsPushState = !!this.options.pushState;
      this._hasPushState = !!(this.history &amp;&amp; this.history.pushState);
      this._usePushState = this._wantsPushState &amp;&amp; this._hasPushState;

      this.fragment = this.getFragment();

      // Normalize root to always include a leading and trailing slash.
      this.root = (`/${this.root}/`).replace(s_ROOT_STRIPPER, &apos;/&apos;);

      // Transition from hashChange to pushState or vice versa if both are requested.
      if (this._wantsHashChange &amp;&amp; this._wantsPushState)
      {

         // If we&apos;ve started off with a route from a `pushState`-enabled
         // browser, but we&apos;re currently in a browser that doesn&apos;t support it...
         if (!this._hasPushState &amp;&amp; !this.atRoot())
         {
            const root = this.root.slice(0, -1) || &apos;/&apos;;
            this.location.replace(`${root}#${this.getPath()}`);

            // Return immediately as browser will do redirect to new url
            return true;

            // Or if we&apos;ve started out with a hash-based route, but we&apos;re currently
            // in a browser where it could be `pushState`-based instead...
         }
         else if (this._hasPushState &amp;&amp; this.atRoot())
         {
            this.navigate(this.getHash(), { replace: true });
         }

      }

      // Proxy an iframe to handle location events if the browser doesn&apos;t support the `hashchange` event, HTML5
      // history, or the user wants `hashChange` but not `pushState`.
      if (!this._hasHashChange &amp;&amp; this._wantsHashChange &amp;&amp; !this._usePushState)
      {
         /**
          * Proxy iframe
          * @type {Element}
          */
         this.iframe = document.createElement(&apos;iframe&apos;);
         this.iframe.src = &apos;javascript:0&apos;;
         this.iframe.style.display = &apos;none&apos;;
         this.iframe.tabIndex = -1;

         const body = document.body;

         // Using `appendChild` will throw on IE &lt; 9 if the document is not ready.
         const iWindow = body.insertBefore(this.iframe, body.firstChild).contentWindow;
         iWindow.document.open();
         iWindow.document.close();
         iWindow.location.hash = `#${this.fragment}`;
      }

      // Add a cross-platform `addEventListener` shim for older browsers.
      const addEventListener = window.addEventListener || function(eventName, listener)
      {
         /* eslint-disable no-undef */
         return attachEvent(`on${eventName}`, listener);
         /* eslint-enable no-undef */
      };

      // Depending on whether we&apos;re using pushState or hashes, and whether
      // &apos;onhashchange&apos; is supported, determine how we check the URL state.
      if (this._usePushState)
      {
         addEventListener(&apos;popstate&apos;, this.checkUrl, false);
      }
      else if (this._useHashChange &amp;&amp; !this.iframe)
      {
         addEventListener(&apos;hashchange&apos;, this.checkUrl, false);
      }
      else if (this._wantsHashChange)
      {
         this._checkUrlInterval = setInterval(this.checkUrl, this.interval);
      }

      if (!this.options.silent) { return this.loadUrl(); }
   }

   /**
    * Disable Backbone.history, perhaps temporarily. Not useful in a real app, but possibly useful for unit
    * testing Routers.
    */
   stop()
   {
      // Add a cross-platform `removeEventListener` shim for older browsers.
      const removeEventListener = window.removeEventListener || function(eventName, listener)
      {
         /* eslint-disable no-undef */
         return detachEvent(`on${eventName}`, listener);
         /* eslint-enable no-undef */
      };

      // Remove window listeners.
      if (this._usePushState)
      {
         removeEventListener(&apos;popstate&apos;, this.checkUrl, false);
      }
      else if (this._useHashChange &amp;&amp; !this.iframe)
      {
         removeEventListener(&apos;hashchange&apos;, this.checkUrl, false);
      }

      // Clean up the iframe if necessary.
      if (this.iframe)
      {
         document.body.removeChild(this.iframe);
         this.iframe = null;
      }

      // Some environments will throw when clearing an undefined interval.
      if (this._checkUrlInterval) { clearInterval(this._checkUrlInterval); }
      History.started = false;
   }

   /**
    * Add a route to be tested when the fragment changes. Routes added later may override previous routes.
    *
    * @param {string}   route    -  Route to add for checking.
    * @param {function} callback -  Callback function to invoke on match.
    */
   route(route, callback)
   {
      this.handlers.unshift({ route, callback });
   }
}</code></pre>

</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(0.4.7)</span></a>
</footer>

<script src="script/jquery/jquery.min.js"></script>
<script src="script/navigation/enhancednav.js"></script>
<script defer src="script/mdl/material.min.js"></script>
<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
